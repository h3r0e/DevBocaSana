DROP DATABASE IF EXISTS BOCA_SANA;    

CREATE DATABASE BOCA_SANA;
USE BOCA_SANA;

CREATE TABLE PACIENTES (
  DNI_PACIENTE varchar(9),
  NOMBRE_APELLIDO varchar(30),
  EDAD integer,
  NACIONALIDAD varchar(30),
  DIRECCION varchar(30),
  TELEFONO varchar(9),
  FECHA_NACIMIENTO DATE,
  PRIMARY KEY (DNI_PACIENTE)
) ENGINE=InnoDB;

INSERT INTO PACIENTES VALUES
 ('35665008Q','Jordi Robles',21,'Ecuador','C/Tarragona','972773374', '2000-01-03'),
 ('78965325X','Pepe Pinto',19,'Spain','C/Barcelona','938882882', '2002-06-08'),
 ('54965325X','Cristiano Ronaldo',37,'Portugal','C/Honduras','938222882', '1985-02-05'); 

CREATE TABLE MEDICOS (
  NOMBRE_APELLIDO varchar(30),
  ESPECIALIDAD varchar(30),
  DIRECCION varchar(30),
  TELEFONO varchar(9),
  PRIMARY KEY (NOMBRE_APELLIDO)
) ENGINE=InnoDB;

INSERT INTO MEDICOS VALUES
 ('Marlene Perez', 'Ortodoncia','C/Cartellá','698532147'),
 ('Joanna Davila', 'Estética Dental', 'C/Dante Alighieri','698745632');

 CREATE TABLE LOGIN (
  USUARIO varchar(30),
  PASSWD varchar(16),
  FECHA date,
  HORA time,
  PRIMARY KEY (USUARIO),
  FOREIGN KEY (USUARIO) REFERENCES MEDICOS (NOMBRE_APELLIDO)
) ENGINE=InnoDB;
 
 INSERT INTO LOGIN VALUES
 ('Marlene Perez','651fd98s1f', '2021-01-08','15:30'),
 ('Joanna Davila','65asd4as8d', '2021-06-18', '20:48');
 
  CREATE TABLE AGENDA (
  ID_CITA integer AUTO_INCREMENT,
  DNI_PACIENTE varchar(9),
  DESCRIPCION_CITA varchar(200),
  FECHA_CITA date,
  HORA_CITA time,
  PRIMARY KEY (ID_CITA),
  FOREIGN KEY (DNI_PACIENTE) REFERENCES PACIENTES (DNI_PACIENTE)
) ENGINE=InnoDB;

 INSERT INTO AGENDA VALUES
 (1,'78965325X','CITA 1','2021-01-08','18:00'),
 (2,'35665008Q','CITA 2','2021-01-05','18:00');
 
  CREATE TABLE TRATAMIENTOS (
  ID_TRATAMIENTO integer AUTO_INCREMENT,
  NOMBRE_TRATAMIENTO varchar(30),
  COSTE double,
  PRIMARY KEY (ID_TRATAMIENTO)
) ENGINE=InnoDB;

INSERT INTO TRATAMIENTOS VALUES
 (1, 'Blanqueamiento', 250),
 (2, 'Higiene', 30);
 
  CREATE TABLE PRESUPUESTOS (
  ID_PRESUPUESTO integer AUTO_INCREMENT,
  ID_TRATAMIENTO integer,
  DNI_PACIENTE varchar(9),
  MEDICO_NOMBRE varchar(30),
  DEUDA integer,
  FECHA date,
  HORA time,
  PRIMARY KEY (ID_PRESUPUESTO),
  FOREIGN KEY (ID_TRATAMIENTO) REFERENCES TRATAMIENTOS (ID_TRATAMIENTO),
  FOREIGN KEY (DNI_PACIENTE) REFERENCES PACIENTES (DNI_PACIENTE),
  FOREIGN KEY (MEDICO_NOMBRE) REFERENCES MEDICOS (NOMBRE_APELLIDO)
) ENGINE=InnoDB;

 INSERT INTO PRESUPUESTOS VALUES
 (1,1,'35665008Q','Marlene Perez',30,'2021-01-08','15:30'),
 (2,2,'78965325X','Joanna Davila',250,'2021-06-18', '20:48');
 
  CREATE TABLE FACTURAS (
  ID_FACTURA integer AUTO_INCREMENT,
  ID_PRESUPUESTO integer,
  DNI_PACIENTE varchar(9),
  SALDO double,
  DEUDA_RESTANTE double,
  FECHA date,
  PRIMARY KEY (ID_FACTURA),
  FOREIGN KEY (DNI_PACIENTE) REFERENCES PACIENTES (DNI_PACIENTE),
  FOREIGN KEY (ID_PRESUPUESTO) REFERENCES PRESUPUESTOS (ID_PRESUPUESTO)
) ENGINE=InnoDB;

 INSERT INTO FACTURAS VALUES
 (1,1,'35665008Q',30,0,'2021-11-16'),
 (2,2,'78965325X',250,0,'2021-11-16');